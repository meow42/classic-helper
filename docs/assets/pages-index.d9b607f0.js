import{o as t,c as e,w as i,r as a,a as s,b as l,d as o,t as n,n as d,e as r,i as c,f as u,g as p,h,s as f,j as g,k as _,l as m,m as y,p as b,q as k,F as x,u as S,v as w}from"./index.7e84b2b6.js";import{r as v,_ as C,a as B,b as T}from"./unicloud-db.2dd915f3.js";import{_ as $}from"./plugin-vue_export-helper.21dcd24c.js";var I=$({name:"UniCard",emits:["click"],props:{title:{type:String,default:""},subTitle:{type:String,default:""},padding:{type:String,default:"10px"},margin:{type:String,default:"15px"},spacing:{type:String,default:"0 10px"},extra:{type:String,default:""},cover:{type:String,default:""},thumbnail:{type:String,default:""},isFull:{type:Boolean,default:!1},isShadow:{type:Boolean,default:!0},shadow:{type:String,default:"0px 0px 3px 1px rgba(0, 0, 0, 0.08)"},border:{type:Boolean,default:!0}},methods:{onClick(t){this.$emit("click",t)}}},[["render",function(h,f,g,_,m,y){const b=c,k=u,x=p;return t(),e(k,{class:r(["uni-card",{"uni-card--full":g.isFull,"uni-card--shadow":g.isShadow,"uni-card--border":g.border}]),style:d({margin:g.isFull?0:g.margin,padding:g.spacing,"box-shadow":g.isShadow?g.shadow:""})},{default:i((()=>[a(h.$slots,"cover",{},(()=>[g.cover?(t(),e(k,{key:0,class:"uni-card__cover"},{default:i((()=>[s(b,{class:"uni-card__cover-image",mode:"widthFix",onClick:f[0]||(f[0]=t=>y.onClick("cover")),src:g.cover},null,8,["src"])])),_:1})):l("",!0)]),!0),a(h.$slots,"title",{},(()=>[g.title||g.extra?(t(),e(k,{key:0,class:"uni-card__header"},{default:i((()=>[s(k,{class:"uni-card__header-box",onClick:f[1]||(f[1]=t=>y.onClick("title"))},{default:i((()=>[g.thumbnail?(t(),e(k,{key:0,class:"uni-card__header-avatar"},{default:i((()=>[s(b,{class:"uni-card__header-avatar-image",src:g.thumbnail,mode:"aspectFit"},null,8,["src"])])),_:1})):l("",!0),s(k,{class:"uni-card__header-content"},{default:i((()=>[s(x,{class:"uni-card__header-content-title uni-ellipsis"},{default:i((()=>[o(n(g.title),1)])),_:1}),g.title&&g.subTitle?(t(),e(x,{key:0,class:"uni-card__header-content-subtitle uni-ellipsis"},{default:i((()=>[o(n(g.subTitle),1)])),_:1})):l("",!0)])),_:1})])),_:1}),s(k,{class:"uni-card__header-extra",onClick:f[2]||(f[2]=t=>y.onClick("extra"))},{default:i((()=>[s(x,{class:"uni-card__header-extra-text"},{default:i((()=>[o(n(g.extra),1)])),_:1})])),_:1})])),_:1})):l("",!0)]),!0),s(k,{class:"uni-card__content",style:d({padding:g.padding}),onClick:f[3]||(f[3]=t=>y.onClick("content"))},{default:i((()=>[a(h.$slots,"default",{},void 0,!0)])),_:3},8,["style"]),s(k,{class:"uni-card__actions",onClick:f[4]||(f[4]=t=>y.onClick("actions"))},{default:i((()=>[a(h.$slots,"actions",{},void 0,!0)])),_:3})])),_:3},8,["class","style"])}],["__scopeId","data-v-3d170368"]]);var F=$({name:"UniBadge",emits:["click"],props:{type:{type:String,default:"error"},inverted:{type:Boolean,default:!1},isDot:{type:Boolean,default:!1},maxNum:{type:Number,default:99},absolute:{type:String,default:""},offset:{type:Array,default:()=>[0,0]},text:{type:[String,Number],default:""},size:{type:String,default:"small"},customStyle:{type:Object,default:()=>({})}},data:()=>({}),computed:{width(){return 8*String(this.text).length+12},classNames(){const{inverted:t,type:e,size:i,absolute:a}=this;return[t?"uni-badge--"+e+"-inverted":"","uni-badge--"+e,"uni-badge--"+i,a?"uni-badge--absolute":""].join(" ")},positionStyle(){if(!this.absolute)return{};let t=this.width/2,e=10;this.isDot&&(t=5,e=5);const i=`${-t+this.offset[0]}px`,a=`${-e+this.offset[1]}px`,s={rightTop:{right:i,top:a},rightBottom:{right:i,bottom:a},leftBottom:{left:i,bottom:a},leftTop:{left:i,top:a}},l=s[this.absolute];return l||s.rightTop},dotStyle(){return this.isDot?{width:"10px",minWidth:"0",height:"10px",padding:"0",borderRadius:"10px"}:{}},displayValue(){const{isDot:t,text:e,maxNum:i}=this;return t?"":Number(e)>i?`${i}+`:e}},methods:{onClick(){this.$emit("click")}}},[["render",function(s,c,h,f,g,_){const m=p,y=u;return t(),e(y,{class:"uni-badge--x"},{default:i((()=>[a(s.$slots,"default",{},void 0,!0),h.text?(t(),e(m,{key:0,class:r([_.classNames,"uni-badge"]),style:d([_.positionStyle,h.customStyle,_.dotStyle]),onClick:c[0]||(c[0]=t=>_.onClick())},{default:i((()=>[o(n(_.displayValue),1)])),_:1},8,["class","style"])):l("",!0)])),_:3})}],["__scopeId","data-v-39fc8a9a"]]);var z=$({name:"UniListItem",emits:["click","switchChange"],props:{direction:{type:String,default:"row"},title:{type:String,default:""},note:{type:String,default:""},ellipsis:{type:[Number,String],default:0},disabled:{type:[Boolean,String],default:!1},clickable:{type:Boolean,default:!1},showArrow:{type:[Boolean,String],default:!1},link:{type:[Boolean,String],default:!1},to:{type:String,default:""},showBadge:{type:[Boolean,String],default:!1},showSwitch:{type:[Boolean,String],default:!1},switchChecked:{type:[Boolean,String],default:!1},badgeText:{type:String,default:""},badgeType:{type:String,default:"success"},badgeStyle:{type:Object,default:()=>({})},rightText:{type:String,default:""},thumb:{type:String,default:""},thumbSize:{type:String,default:"base"},showExtraIcon:{type:[Boolean,String],default:!1},extraIcon:{type:Object,default:()=>({type:"",color:"#000000",size:20})},border:{type:Boolean,default:!0}},data:()=>({isFirstChild:!1}),mounted(){this.list=this.getForm(),this.list&&(this.list.firstChildAppend||(this.list.firstChildAppend=!0,this.isFirstChild=!0))},methods:{getForm(t="uniList"){let e=this.$parent,i=e.$options.name;for(;i!==t;){if(e=e.$parent,!e)return!1;i=e.$options.name}return e},onClick(){""===this.to?(this.clickable||this.link)&&this.$emit("click",{data:{}}):this.openPage()},onSwitchChange(t){this.$emit("switchChange",t.detail)},openPage(){-1!==["navigateTo","redirectTo","reLaunch","switchTab"].indexOf(this.link)?this.pageApi(this.link):this.pageApi("navigateTo")},pageApi(t){let e={url:this.to,success:t=>{this.$emit("click",{data:t})},fail:t=>{this.$emit("click",{data:t})}};switch(t){case"navigateTo":default:h(e);break;case"redirectTo":_(e);break;case"reLaunch":g(e);break;case"switchTab":f(e)}}}},[["render",function(d,h,f,g,_,b){const k=u,x=c,S=v(m("uni-icons"),C),w=p,B=v(m("uni-badge"),F),T=y;return t(),e(k,{class:r([{"uni-list-item--disabled":f.disabled},"uni-list-item"]),"hover-class":!f.clickable&&!f.link||f.disabled||f.showSwitch?"":"uni-list-item--hover",onClick:b.onClick},{default:i((()=>[_.isFirstChild?l("",!0):(t(),e(k,{key:0,class:r(["border--left",{"uni-list--border":f.border}])},null,8,["class"])),s(k,{class:r(["uni-list-item__container",{"container--right":f.showArrow||f.link,"flex--direction":"column"===f.direction}])},{default:i((()=>[a(d.$slots,"header",{},(()=>[s(k,{class:"uni-list-item__header"},{default:i((()=>[f.thumb?(t(),e(k,{key:0,class:"uni-list-item__icon"},{default:i((()=>[s(x,{src:f.thumb,class:r(["uni-list-item__icon-img",["uni-list--"+f.thumbSize]])},null,8,["src","class"])])),_:1})):f.showExtraIcon?(t(),e(k,{key:1,class:"uni-list-item__icon"},{default:i((()=>[s(S,{color:f.extraIcon.color,size:f.extraIcon.size,type:f.extraIcon.type},null,8,["color","size","type"])])),_:1})):l("",!0)])),_:1})]),!0),a(d.$slots,"body",{},(()=>[s(k,{class:r(["uni-list-item__content",{"uni-list-item__content--center":f.thumb||f.showExtraIcon||f.showBadge||f.showSwitch}])},{default:i((()=>[f.title?(t(),e(w,{key:0,class:r(["uni-list-item__content-title",[0!==f.ellipsis&&f.ellipsis<=2?"uni-ellipsis-"+f.ellipsis:""]])},{default:i((()=>[o(n(f.title),1)])),_:1},8,["class"])):l("",!0),f.note?(t(),e(w,{key:1,class:"uni-list-item__content-note"},{default:i((()=>[o(n(f.note),1)])),_:1})):l("",!0)])),_:1},8,["class"])]),!0),a(d.$slots,"footer",{},(()=>[f.rightText||f.showBadge||f.showSwitch?(t(),e(k,{key:0,class:r(["uni-list-item__extra",{"flex--justify":"column"===f.direction}])},{default:i((()=>[f.rightText?(t(),e(w,{key:0,class:"uni-list-item__extra-text"},{default:i((()=>[o(n(f.rightText),1)])),_:1})):l("",!0),f.showBadge?(t(),e(B,{key:1,type:f.badgeType,text:f.badgeText,"custom-style":f.badgeStyle},null,8,["type","text","custom-style"])):l("",!0),f.showSwitch?(t(),e(T,{key:2,disabled:f.disabled,checked:f.switchChecked,onChange:b.onSwitchChange},null,8,["disabled","checked","onChange"])):l("",!0)])),_:1},8,["class"])):l("",!0)]),!0)])),_:3},8,["class"]),f.showArrow||f.link?(t(),e(S,{key:1,size:16,class:"uni-icon-wrapper",color:"#bbb",type:"arrowright"})):l("",!0)])),_:3},8,["class","hover-class","onClick"])}],["__scopeId","data-v-69619d8d"]]);var A=$({name:"uniList","mp-weixin":{options:{multipleSlots:!1}},props:{enableBackToTop:{type:[Boolean,String],default:!1},scrollY:{type:[Boolean,String],default:!1},border:{type:Boolean,default:!0}},created(){this.firstChildAppend=!1},methods:{loadMore(t){this.$emit("scrolltolower")}}},[["render",function(s,o,n,d,r,c){const p=u;return t(),e(p,{class:"uni-list uni-border-top-bottom"},{default:i((()=>[n.border?(t(),e(p,{key:0,class:"uni-list--border-top"})):l("",!0),a(s.$slots,"default",{},void 0,!0),n.border?(t(),e(p,{key:1,class:"uni-list--border-bottom"})):l("",!0)])),_:3})}],["__scopeId","data-v-5d0c354c"]]);var j=$({data:()=>({keys:[]}),methods:{}},[["render",function(a,l,d,r,h,f){const g=u,_=c,y=p,$=v(m("uni-tag"),T),F=v(m("uni-icons"),C),j=v(m("uni-card"),I),N=v(m("uni-list-item"),z),L=v(m("uni-list"),A),D=v(m("unicloud-db"),B);return t(),e(g,{class:"index-page"},{default:i((()=>[s(g,{class:"search-bar"}),s(g,{class:"dian-view"},{default:i((()=>[s(D,{collection:"dian",where:"unlocked==true"},{default:i((({data:d,loading:r,error:c,options:u})=>[s(L,{class:"dian-list"},{default:i((()=>[(t(!0),b(x,null,k(d,(d=>(t(),e(N,{note:d.note},{body:i((()=>[s(j,{cover:a.cover,border:!1,margin:"0px",padding:"0px",spacing:"0px"},{default:i((()=>[s(_,{slot:"cover",src:d.url,mode:"aspectFit"},null,8,["src"]),S(s(y,{class:"uni-body"},{default:i((()=>[o(n(d.note),1)])),_:2},1536),[[w,!1]]),s(g,{class:"card-tags"},{default:i((()=>[(t(!0),b(x,null,k(d.tags,(i=>(t(),e($,{inverted:"",text:i,size:"small"},null,8,["text"])))),256))])),_:2},1024),s(g,{slot:"actions",class:"card-actions"},{default:i((()=>[s(g,{class:"card-actions-item",onClick:l[0]||(l[0]=t=>a.actionsClick("分享"))},{default:i((()=>[s(F,{type:"info",color:"#999"}),s(y,{class:"card-actions-item-text"},{default:i((()=>[o("反馈")])),_:1})])),_:1}),s(g,{class:"card-actions-item",onClick:l[1]||(l[1]=t=>a.actionsClick("点赞"))},{default:i((()=>[s(F,{type:"hand-up",color:"#999"}),s(y,{class:"card-actions-item-text"},{default:i((()=>[o("点赞")])),_:1})])),_:1}),s(g,{class:"card-actions-item",onClick:l[2]||(l[2]=t=>a.actionsClick("评论"))},{default:i((()=>[s(F,{type:"star",color:"#999"}),s(y,{class:"card-actions-item-text"},{default:i((()=>[o("收藏")])),_:1})])),_:1})])),_:1})])),_:2},1032,["cover"])])),_:2},1032,["note"])))),256))])),_:2},1024)])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-3e16da29"]]);export{j as default};
